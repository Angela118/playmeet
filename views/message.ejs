<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/common.css" rel="stylesheet">
    <link href="../css/chat.css" rel="stylesheet">

    <!-- Bootstrap core JavaScript -->
    <script src="../js/jquery.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="jquery-3.1.1.min.js"></script>
    <title>채팅방</title>
</head>
<!--메뉴 영역 시작 -->
<!--여기선 메뉴명 채팅방으로 되어 있음-->



<body class="coloring">

<script type="text/javascript">
    function goBack(){
        window.history.back();
    }
</script>

<% var index = sSameEmailIndex;
var curGender = event_data[index].gender;
var curMove = event_data[index].move;
if(curGender == 75) {
    curGender = '무관';
}else if(curGender == 50) {
    curGender = '남자';
}else if(curGender == 100){
    curGender = '여자';
}
if(curMove == 100){
    curMove = 'O';
}else if(curMove == 50){
    curMove = 'X';
}
%>

<!--메뉴 다름-->
<nav class="navbar">
    <div class="top">
        <img src="../img/left-arrow.png" height="20rem" onclick="goBack();">
		<!--<a href="/"><img src="../img/update_playmeet3.jpg" height="50rem" style="margin-right:-1rem;"></a>-->
        <div style="color:white;"> <%= event_data[index].teamname %>팀으로부터 받은 메시지</div>
        <div class="sets" style="visibility:hidden;">
            <a href="/chatroomchat"><img src="../img/update_chat.png" class="menu_img" height="20rem" style="margin-right: .3rem;"></a>
            <img src="../img/update_menu.png" height="20rem" class="navbar-toggler" data-toggle="collapse" data-target="#navbarsExample01" aria-controls="navbarsExample01" aria-expanded="false" aria-label="Toggle navigation">
        </div>
    </div>
</nav>
    
<script>
    function clicked(email, teamname, sameEmailIndex, match) {
        document.getElementById('sEmail').value = email;
		document.getElementById('sTeamname').value = teamname;
        document.getElementById('sSameEmailIndex').value = sameEmailIndex;
        document.getElementById('match').value = match;
		if(match == 1){
        	alert('email : ' + email + '/ sameEmailIndex : ' + sameEmailIndex + '/ match : ' + match + '매칭을 승낙하였습니다.');
		}else if(match == 2){
			alert('email : ' + email + '/ sameEmailIndex : ' + sameEmailIndex + '/ match : ' + match + '매칭을 거절하였습니다.');
		}
        document.getElementById('formPost').submit();
    }
</script>

<div class="container" style="padding-top:50px;">
    <div class="reco">
        <div class="mb-3">
            <p style="line-height: 2rem; border:2px solid #7473ff; padding: .5rem;">
                주장 이메일 : <%= event_data[index].email %><br>
                팀명 : <%= event_data[index].teamname %> 팀<br>
                <!--팀 지역에서 add[1]값이 없는 건 회원가입할 때 add가 배열이 아니어서임-->
                팀 지역 : <%= event_data[index].add%><br>
                <!--팀 지역 : <%= event_data[index].add[0] %> <%event_data[index].add[1]%><br>-->
                내가 등록했던 지역 : <%= event_data[index].others.sAdd[0]%> <%= event_data[index].others.sAdd[1] %><br>
                내가 등록했던 장소 : <%= event_data[index].others.sRegion %><br>
                원정가능 여부 : <%= curMove %><br>
                연령대 : <%= event_data[index].age %>대<br>
                성별 : <%= curGender %><br>
                경기 경력(년수) : <%=event_data[index].career_year%>년<br>
                경기 경력(횟수) : <%=event_data[index].career_count%>번<br>
                경기 날짜 : <%= event_data[index].others.sEvent_date %><br>
                경기 시간 : <%= event_data[index].others.sEvent_time %><br>
                경기 요일 : <%= event_data[index].others.sEvent_day %>요일<br>
                한마디 : <%= event_data[index].others.sMention %><br>
                신청 날짜 : <%= event_data[index].others.sCreatedMonth %>월 <%= event_data[index].others.sCreatedDay %>일<br>
                팀 인원수 : <%= event_data[index].nofteam %>명<br>
                상대팀 별점 : <%= event_data[index].allRating %><br>
            </p>
            <p><b>해당 경기 날짜에 매칭 신청합니다. 수락하시겠습니까?</b></p>

            <form action="/message" method="post" id="formPost">
                <input type="hidden" name="sEmail" id="sEmail" value=''>
				<input type="hidden" name="sTeamname" id="sTeamname" value=''>
                <input type="hidden" name="sSameEmailIndex" id="sSameEmailIndex" value=''>
                <input type="hidden" name="match" id="match" value=''>

                <div style="text-align: center">
                    <button type="button" class="btn" style="color:white; text-align:center; margin-left:Auto;margin-right:auto; background-color:#7473ff;" onclick="clicked( `<%= event_data[index].email %>`,`<%=index%>`, 2)">매칭 거절</button>
                    <button type="button" class="btn" style="color:white; text-align:center; margin-left:Auto;margin-right:auto; background-color:#7473ff;" onclick="clicked( `<%= event_data[index].email %>`,`<%= event_data[index].others.sTeamname %>`,`<%=index%>`, 1)">매칭 수락</button>
                </div>

            </form>
        </div>
    </div>
</div>
    </body>
    <footer class="my-5 pt-5 text-muted text-center text-small"></footer>
</html>